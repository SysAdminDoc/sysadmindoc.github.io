<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Coming Soon</title>

  <!-- Import Montserrat (your font choice) -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900&display=swap" rel="stylesheet">

  <style>
    /* ----- Base & Layers ----- */
    html, body { height: 100%; }
    body {
      margin: 0;
      background: #000; /* safety background behind video */
      font-family: 'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: #fff;
      overflow: hidden;
    }
    .layer { position: fixed; inset: 0; pointer-events: none; }

    /* ----- Background Video (tasteful, dimmed) ----- */
    #bg-video-wrap { z-index: 0; }
    #bg-video {
      position: absolute; inset: 0;
      width: 100%; height: 100%;
      object-fit: cover;            /* fill screen nicely */
      filter: saturate(105%);       /* subtle polish */
      background: #000;             /* while loading */
    }
    /* Dark overlays to keep text readable and cinematic */
    #bg-overlays::before, #bg-overlays::after {
      content: ""; position: absolute; inset: 0;
      pointer-events: none;
    }
    /* Global dimmer */
    #bg-overlays::before {
      background: rgba(0,0,0,0.35);
    }
    /* Radial vignette for drama */
    #bg-overlays::after {
      background:
        radial-gradient(120% 90% at 50% 50%, rgba(0,0,0,0) 0%, rgba(0,0,0,0.55) 70%);
      mix-blend-mode: multiply;
    }

    /* ----- Optional canvas effect layer (your existing canvas) ----- */
    #canvas { z-index: 1; position: fixed; inset: 0; width: 100%; height: 100%; pointer-events: none; }

    /* ----- Centered Teaser Text with Minimal Glitch ----- */
    #preloader-text {
      z-index: 2;
      display: grid; place-items: center;
    }
    #preloader-text-title.glitch {
      font-size: 24px;           /* your requested size */
      font-weight: 100;          /* your requested weight */
      text-transform: lowercase;
      letter-spacing: 0.08em;
      text-align: center;
      text-shadow: 0 0 10px rgba(127,92,255,0.4);
      position: relative;
      pointer-events: auto;      /* allow click to unmute */
    }
    /* Tasteful visible glitch */
    #preloader-text-title.glitch::before,
    #preloader-text-title.glitch::after {
      content: attr(data-text);
      position: absolute; left: 0; top: 0; width: 100%;
      background: transparent; overflow: hidden;
      clip: rect(0, 900px, 0, 0);
      pointer-events: none;
    }
    /* Lavender ghost (top slices) */
    #preloader-text-title.glitch::before {
      color: rgba(183,139,255,0.85);
      animation: glitchTop 3.2s infinite linear alternate-reverse;
      transform: translate(-1px,-1px);
    }
    /* Purple ghost (bottom slices) */
    #preloader-text-title.glitch::after {
      color: rgba(127,92,255,0.85);
      animation: glitchBottom 2.8s infinite linear alternate-reverse;
      transform: translate(1px,1px);
    }
    @keyframes glitchTop {
      0%   { clip: rect(0, 9999px, 0, 0); }
      10%  { clip: rect(0, 9999px, 42%, 0); }
      16%  { clip: rect(0, 9999px, 0, 0); }
      48%  { clip: rect(0, 9999px, 18%, 0); }
      54%  { clip: rect(0, 9999px, 0, 0); }
      100% { clip: rect(0, 9999px, 0, 0); }
    }
    @keyframes glitchBottom {
      0%   { clip: rect(0, 9999px, 0, 0); }
      14%  { clip: rect(62%, 9999px, 100%, 0); }
      22%  { clip: rect(0, 9999px, 0, 0); }
      56%  { clip: rect(74%, 9999px, 100%, 0); }
      64%  { clip: rect(0, 9999px, 0, 0); }
      100% { clip: rect(0, 9999px, 0, 0); }
    }

    /* ----- Audio Unmute Nudge ----- */
    #unmute {
      position: fixed; left: 50%; bottom: 24px; transform: translateX(-50%);
      display: none; padding: 10px 14px; border-radius: 10px;
      background: rgba(0,0,0,0.78); color: #fff;
      border: 1px solid rgba(255,255,255,0.2);
      backdrop-filter: blur(6px);
      z-index: 3; cursor: pointer; user-select: none;
      pointer-events: auto;
    }
    #unmute:active { transform: translateX(-50%) scale(0.98); }

    audio { display: none; }
  </style>
</head>
<body>

  <!-- Background video layer -->
  <div id="bg-video-wrap" class="layer" aria-hidden="true">
    <video id="bg-video"
      autoplay
      muted
      loop
      playsinline
      preload="auto"
      disablepictureinpicture
      aria-hidden="true"
    >
      <!-- Working sample video (royalty-free). Replace with your own when ready. -->
      <source src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4" type="video/mp4" />
    </video>
    <div id="bg-overlays"></div>
  </div>

  <!-- Your canvas effect (kept for future visuals) -->
  <canvas id="canvas"></canvas>

  <!-- Teaser text -->
  <div id="preloader-text" class="layer">
    <div id="preloader-text-title" class="glitch" data-text="coming soon">coming soon</div>
  </div>

  <!-- Background music: autoplay muted; tap to unmute -->
  <audio id="bg-audio" preload="auto" autoplay muted playsinline crossorigin="anonymous"></audio>
  <div id="unmute" role="button" aria-label="Unmute audio">Tap to unmute</div>

  <!-- If you have a ring/three effect script, you can include it here -->
  <!-- <script src="./home/js/three.min.js"></script> -->
  <!-- <script src="./home/js/renderRing.js"></script> -->

  <script>
    /* ===========================
       Background Audio (unchanged behavior)
    ============================ */
    const SONG_URL = 'https://raw.githubusercontent.com/SysAdminDoc/sysadmindoc.github.io/main/songs/Honour.mp3';
    const audio = document.getElementById('bg-audio');
    const unmute = document.getElementById('unmute');
    const title = document.getElementById('preloader-text-title');

    function showUnmute(){ unmute.style.display = 'inline-block'; }
    function hideUnmute(){ unmute.style.display = 'none'; }

    function fadeVolume(to = 0.9, ms = 800) {
      const from = audio.volume || 0.01;
      const steps = Math.max(1, Math.round(ms/16));
      let i = 0;
      const id = setInterval(()=>{
        i++;
        audio.volume = from + (to - from)*(i/steps);
        if (i >= steps) clearInterval(id);
      }, 16);
    }

    async function tryPlay(unmuteNow = false) {
      if (!audio.src) audio.src = SONG_URL;
      if (unmuteNow) { audio.muted = false; audio.volume = Math.max(0.01, audio.volume || 0.01); }
      try { await audio.play(); return true; } catch { return false; }
    }

    async function initAudio() {
      audio.muted = true; audio.volume = 0.0;
      await tryPlay(false);
      const ok = await tryPlay(true);
      if (ok && !audio.muted) {
        fadeVolume(0.9, 900);
      } else {
        showUnmute();
      }
    }

    async function onUserUnmute() {
      hideUnmute();
      audio.muted = false; audio.volume = Math.max(0.01, audio.volume || 0.01);
      const ok = await tryPlay(true);
      if (ok) fadeVolume(0.9, 900);
    }

    audio.addEventListener('ended', ()=>{
      audio.currentTime = 0;
      audio.play().catch(showUnmute);
    });

    ['pointerdown','touchstart','click','keydown'].forEach(evt=>{
      document.addEventListener(evt, onUserUnmute, { once:true, capture:true });
    });
    unmute.addEventListener('click', onUserUnmute);
    title.addEventListener('click', onUserUnmute);

    document.addEventListener('visibilitychange', ()=>{
      if (!document.hidden && audio.paused) { tryPlay(!audio.muted); }
    });

    /* Kick off audio when ready */
    document.addEventListener('DOMContentLoaded', initAudio);
  </script>
</body>
</html>
